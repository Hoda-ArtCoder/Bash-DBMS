#!/bin/bash
source ./Common
source ./TablesMenu

function connect_to_database() {

  #get only folders in the directory
  #awk '{print $NF}': Prints the last field (the name of the directory) from each line of the output.
  databases_arr=($(ls -l "$DB_DIR" | grep '^d' | awk '{print $NF}'))
  if is_array_empty "${databases_arr[@]}"; then
      echo "No databases found in the directory."
      return
  else
      echo -e "${magenta}-- -- -- --Connect to a Database-- -- -- --${clear}"
      PS3=$(echo -e "${cyan}>> Select a database from the following list: ${clear}")
      select database_name in "${databases_arr[@]}"; do
          if [[ -n "$database_name" ]]; then
              SELECTED_DB=$database_name
              echo -e "${green}CONNECTED TO DATABASE:${magenta} $database_name${clear}"
              break
          else
              echo -e "${yellow}Warning: Invalid choice. Please select a valid number.${clear}"
          fi
      done
      tablesMenu
  fi
}